{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImg(inputValue, currentPage) {\n    axios.defaults.baseURL = \"https://pixabay.com/api/\";\n    const API_KEY = \"43042666-e07e8410a021eff335b7f491d\";\n    const params = {\n        key: API_KEY,\n        q: inputValue,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: currentPage,\n        per_page: 15\n    };\n \n    const res = await axios.get('', { params: params });\n      return res.data;\n}\n\n\n","export function createGallery(images) {\n    const list = document.querySelector(\".gallery\");\n    const markup = images.map(image => {\n        return `<li class=\"list-item\"><a href=\"${image.largeImageURL}\">\n        <img class=\"item-img\" loading=\"lazy\"     src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>  \n        <div class=\"container\">\n        <h3 class=\"title\">Likes</h3>\n      <p>${image.likes}</p></div >\n      <div class=\"container\">\n        <h3 class=\"title\">Views</h3>\n      <p>${image.views}</p></div >\n      <div class=\"container\">\n        <h3 class=\"title\">Comments</h3>\n      <p>${image.comments}</p></div >\n      <div class=\"container\">\n        <h3 class=\"title\">Downloads</h3>\n      <p class=\"info\">${image.downloads}</p></div >\n        </li>`\n    }).join(\"\");\n    list.insertAdjacentHTML('beforeend', markup);\n}\n","\"use strict\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImg } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\n\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".search-input\");\n\nconst myGallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n\nform.addEventListener(\"submit\", makeGallery);\n\n// global\n\nlet inputValue;\nlet currentPage = 1;\nlet maxPage; \nconst perPage = 15;\n\n\nasync function makeGallery(e) {\n    // base\n    e.preventDefault();\n    const list = document.querySelector(\".gallery\");\n    list.innerHTML = '';\n    currentPage = 1;\n    showLoader(true);\n    inputValue = input.value;\n\n\n    if (!inputValue) {\n        loadMoreBtnOff();\n        errorMess('Value cannot be empty');\n    } else {\n        try {showLoader(true);\n            const data = await getImg(inputValue, currentPage);\n            if (data.hits.length === 0)\n            {loadMoreBtnOff();\n                errorMess(\"Sorry, there are no images matching your search query. Please try again!\");\n        } else {try {showLoader(true);\n                maxPage = Math.ceil(data.totalHits / perPage);\n                lastPage();\n                const images = data.hits;\n                createGallery(images);\n                loadMoreBtnOn();\n                const card = document.querySelector(\".list-item\");\n                const height = card.getBoundingClientRect().height * 2;\n                window.scrollBy(0, height);\n                myGallery.refresh();\n            } catch {\n                console.log(\"makeGallery error\");\n                }\n                }\n            } catch (error) {\n        errorMess(\"Something wrong=(\");\n        }\n        showLoader(false);\n    }};\n\n\n\nconst errorMess = (messege) => {\n     iziToast.error({\n    title: 'Error',\n    message: messege,\n    backgroundColor: '#EF4040',\n    messageColor: '#FFFFFF',\n    maxWidth: 300,\n    timeout: 2000,\n    progressBar: false,\n    position: 'topRight',\n    transitionIn: 'bounceInRight',\n    transitionOut: 'fadeOutLeft',\n    messageSize: 12,\n})\n}\n\nconst showLoader = (state) => {\n  const loader = document.querySelector('.loader');\n  loader.style.display = state ? 'block' : 'none';\n};\n\n// пагінація\n// створив, приховав кнопку\n\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nfunction loadMoreBtnOn() {\n    loadMoreBtn.style.display = \"block\";\n};\n\nfunction loadMoreBtnOff() {\n    loadMoreBtn.style.display = \"none\";\n};\n\nloadMoreBtn.addEventListener(\"click\", loadMoreBtnClick);\n\nasync function loadMoreBtnClick() {\n    currentPage += 1;\n    const data = await getImg(inputValue, currentPage);\n    const images = data.hits;\n    createGallery(images);\n    loadMoreBtnOn();\n    myGallery.refresh();\n    lastPage();\n};\n\nfunction lastPage() {\n    if (currentPage >= maxPage) {\n        loadMoreBtnOff();\n        errorMess(\"We're sorry, but you've reached the end of search results.\");\n    }\n}\n\n"],"names":["getImg","inputValue","currentPage","axios","params","createGallery","images","list","markup","image","form","input","myGallery","SimpleLightbox","makeGallery","maxPage","perPage","e","showLoader","loadMoreBtnOff","errorMess","data","lastPage","loadMoreBtnOn","height","messege","iziToast","state","loader","loadMoreBtn","loadMoreBtnClick"],"mappings":"owBAEO,eAAeA,EAAOC,EAAYC,EAAa,CAClDC,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAS,CACX,IAFY,qCAGZ,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,EAGM,OADU,MAAMC,EAAM,IAAI,GAAI,CAAE,OAAQC,CAAM,CAAE,GACrC,IACjB,CCjBO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAASF,EAAO,IAAIG,GACf,kCAAkCA,EAAM,aAAa;AAAA,wDACZA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,WAGnFA,EAAM,KAAK;AAAA;AAAA;AAAA,WAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,WAGXA,EAAM,QAAQ;AAAA;AAAA;AAAA,wBAGDA,EAAM,SAAS;AAAA,cAElC,EAAE,KAAK,EAAE,EACVF,EAAK,mBAAmB,YAAaC,CAAM,CAC/C,CCRA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,eAAe,EAE9CC,EAAY,IAAIC,EAAe,aAAc,CACjD,aAAc,MACd,aAAc,IACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACZ,CAAC,EAEDH,EAAK,iBAAiB,SAAUI,CAAW,EAI3C,IAAIb,EACAC,EAAc,EACda,EACJ,MAAMC,EAAU,GAGhB,eAAeF,EAAYG,EAAG,CAE1BA,EAAE,eAAc,EAChB,MAAMV,EAAO,SAAS,cAAc,UAAU,EAO9C,GANAA,EAAK,UAAY,GACjBL,EAAc,EACdgB,EAAW,EAAI,EACfjB,EAAaU,EAAM,MAGf,CAACV,EACDkB,IACAC,EAAU,uBAAuB,MAC9B,CACH,GAAI,CAACF,EAAW,EAAI,EAChB,MAAMG,EAAO,MAAMrB,EAAOC,EAAYC,CAAW,EACjD,GAAImB,EAAK,KAAK,SAAW,EACxBF,EAAc,EACXC,EAAU,0EAA0E,MACpF,IAAI,CAACF,EAAW,EAAI,EACpBH,EAAU,KAAK,KAAKM,EAAK,UAAYL,CAAO,EAC5CM,IACA,MAAMhB,EAASe,EAAK,KACpBhB,EAAcC,CAAM,EACpBiB,IAEA,MAAMC,EADO,SAAS,cAAc,YAAY,EAC5B,sBAAqB,EAAG,OAAS,EACrD,OAAO,SAAS,EAAGA,CAAM,EACzBZ,EAAU,QAAO,CACjC,MAAoB,CACJ,QAAQ,IAAI,mBAAmB,CAC9B,CAEJ,MAAe,CACpBQ,EAAU,mBAAmB,CAC5B,CACDF,EAAW,EAAK,CACxB,CAAK,CAIL,MAAME,EAAaK,GAAY,CAC1BC,EAAS,MAAM,CAChB,MAAO,QACP,QAASD,EACT,gBAAiB,UACjB,aAAc,UACd,SAAU,IACV,QAAS,IACT,YAAa,GACb,SAAU,WACV,aAAc,gBACd,cAAe,cACf,YAAa,EACjB,CAAC,CACD,EAEMP,EAAcS,GAAU,CAC5B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAUD,EAAQ,QAAU,MAC3C,EAKME,EAAc,SAAS,cAAc,gBAAgB,EAE3D,SAASN,GAAgB,CACrBM,EAAY,MAAM,QAAU,OAChC,CAEA,SAASV,GAAiB,CACtBU,EAAY,MAAM,QAAU,MAChC,CAEAA,EAAY,iBAAiB,QAASC,CAAgB,EAEtD,eAAeA,GAAmB,CAC9B5B,GAAe,EAEf,MAAMI,GADO,MAAMN,EAAOC,EAAYC,CAAW,GAC7B,KACpBG,EAAcC,CAAM,EACpBiB,IACAX,EAAU,QAAO,EACjBU,GACJ,CAEA,SAASA,GAAW,CACZpB,GAAea,IACfI,IACAC,EAAU,4DAA4D,EAE9E"}